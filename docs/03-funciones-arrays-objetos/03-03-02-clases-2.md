# 3.3.2 Clases y objetos (II): herencia y encapsulaciÃ³n

En la programaciÃ³n orientada a objetos, **herencia** y **encapsulaciÃ³n** son dos conceptos clave que permiten crear cÃ³digo mÃ¡s organizado, reutilizable y seguro.
En JavaScript se implementan a travÃ©s de las clases, sus constructores y los modificadores de acceso.

---

## ğŸ“Œ Herencia

La **herencia** permite que una clase (*subclase*) extienda otra clase (*superclase*), heredando sus propiedades y mÃ©todos.
Esto evita repetir cÃ³digo y facilita la especializaciÃ³n de clases.

### Sintaxis bÃ¡sica con `extends`

```js
// Clase base
class Animal {
  constructor(nombre) {
    this.nombre = nombre;
  }

  hablar() {
    console.log(`${this.nombre} hace un sonido.`);
  }
}

// Subclase que hereda de Animal
class Perro extends Animal {
  hablar() {
    console.log(`${this.nombre} ladra: Â¡guau guau!`);
  }
}

const perro = new Perro("Toby");
perro.hablar(); // Toby ladra: Â¡guau guau!
```

En este ejemplo, `Perro` hereda de `Animal` y sobrescribe (`override`) el mÃ©todo `hablar`.

### Uso de `super`

La palabra clave `super` permite **llamar al constructor o mÃ©todos de la clase padre**.

```js
class Gato extends Animal {
  constructor(nombre, color) {
    super(nombre); // Llama al constructor de Animal
    this.color = color;
  }

  hablar() {
    super.hablar(); // Llama al mÃ©todo de la superclase
    console.log(`${this.nombre} maÃºlla: Â¡miau!`);
  }
}

const gato = new Gato("Michi", "negro");
gato.hablar();
// Michi hace un sonido.
// Michi maÃºlla: Â¡miau!
```

---

## ğŸ“Œ EncapsulaciÃ³n

La **encapsulaciÃ³n** significa proteger el acceso a los datos internos de un objeto, para que solo se manipulen a travÃ©s de mÃ©todos seguros.

En JavaScript moderno se usa el prefijo `#` para declarar **propiedades privadas** dentro de una clase.

```js
class CuentaBancaria {
  #saldo; // Propiedad privada

  constructor(saldoInicial) {
    this.#saldo = saldoInicial;
  }

  // MÃ©todo pÃºblico para consultar
  verSaldo() {
    return this.#saldo;
  }

  // MÃ©todo pÃºblico para modificar con seguridad
  depositar(cantidad) {
    if (cantidad > 0) {
      this.#saldo += cantidad;
    }
  }

  retirar(cantidad) {
    if (cantidad > 0 && cantidad <= this.#saldo) {
      this.#saldo -= cantidad;
    } else {
      console.log("Fondos insuficientes o cantidad invÃ¡lida.");
    }
  }
}

const cuenta = new CuentaBancaria(100);
console.log(cuenta.verSaldo()); // 100
cuenta.depositar(50);
console.log(cuenta.verSaldo()); // 150
cuenta.retirar(200); // Fondos insuficientes
```

!!! note "Propiedades privadas modernas"
    Antes de la introducciÃ³n del prefijo `#` (ES2022), se usaban convenciones como `_saldo` para indicar que una propiedad debÃ­a tratarse como privada, pero no habÃ­a protecciÃ³n real.
    Hoy en dÃ­a, `#` garantiza que la propiedad no pueda accederse desde fuera de la clase.

---

## ğŸ“ Preguntas de repaso

!!! question "Reflexiona sobre lo aprendido"
    1. Â¿QuÃ© palabra clave se utiliza para extender una clase en JavaScript?
    2. Â¿QuÃ© funciÃ³n tiene `super` dentro de una subclase?
    3. Â¿QuÃ© diferencia hay entre usar `_propiedad` y `#propiedad` en una clase?
    4. Escribe una clase `Empleado` que herede de `Persona` y aÃ±ada la propiedad `salario`.
    5. Â¿CÃ³mo se consigue proteger los datos internos de una clase en JavaScript?