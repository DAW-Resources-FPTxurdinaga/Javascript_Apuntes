# 2.8 Map: Colecciones clave–valor

El objeto `Map` permite almacenar pares **clave–valor**, donde las claves pueden ser de **cualquier tipo** (objetos, funciones, arrays, valores primitivos).
A diferencia de los objetos normales (`{}`), un `Map` mantiene el **orden de inserción** y ofrece métodos específicos para su gestión.

!!! info "¿Por qué usar `Map` en lugar de objetos literales?"
    - En un objeto literal, las claves siempre se convierten a cadenas.
    - En un `Map`, las claves pueden ser **cualquier valor**, incluso objetos o funciones.
    - Además, `Map` ofrece el método `.size` y una API más clara para trabajar con colecciones dinámicas.

---

## 📌 Crear un `Map`

### Map vacío y con valores iniciales

```js
// Map vacío
const m1 = new Map();

// Map con pares clave–valor iniciales
const m2 = new Map([
  ["nombre", "Laura"],
  ["edad", 30],
  [true, "activo"]
]);
```

### Usando objetos o funciones como clave

```js
const claveObjeto = { id: 1 };
const claveFuncion = function() {};

const m3 = new Map();
m3.set(claveObjeto, "soy un objeto");
m3.set(claveFuncion, "soy una función");
```

---

## 📌 Métodos principales

### Añadir y obtener

```js
const persona = new Map();

persona.set("nombre", "Laura");
persona.set("edad", 28);

console.log(persona.get("nombre")); // "Laura"
console.log(persona.get("edad"));   // 28
```

### Comprobar y eliminar

```js
persona.has("nombre");   // true
persona.delete("edad");  // elimina la clave "edad"
```

### Tamaño y limpieza

```js
persona.size;    // número de elementos
persona.clear(); // elimina todo el contenido
```

---

## 📌 Recorrer un `Map`

### Con `for...of`

```js
const usuario = new Map([
  ["nombre", "Laura"],
  ["rol", "admin"],
  ["activo", true]
]);

for (const [clave, valor] of usuario) {
  console.log(clave, valor);
}
```

### Con `forEach`

```js
usuario.forEach((valor, clave) => {
  console.log(`${clave}: ${valor}`);
});
```

### Obtener listas de claves, valores y entradas

```js
[...usuario.keys()];   // ["nombre", "rol", "activo"]
[...usuario.values()]; // ["Laura", "admin", true]
[...usuario.entries()];// [["nombre","Laura"],["rol","admin"],["activo",true]]
```

---

## 📌 Diferencias clave entre `Map` y objetos literales

* Mantiene el **orden de inserción**.
* Las claves pueden ser **cualquier tipo de dato**.
* Proporciona la propiedad `.size` en lugar de `Object.keys(obj).length`.
* Iterar sobre un `Map` es más directo y claro.

---

## 📌 Casos de uso frecuentes

### Contador de elementos

```js
const palabras = ["uno", "dos", "uno", "tres", "dos", "uno"];
const contador = new Map();

for (const palabra of palabras) {
  contador.set(palabra, (contador.get(palabra) || 0) + 1);
}

console.log(contador); // Map { "uno" => 3, "dos" => 2, "tres" => 1 }
```

### Asociar objetos sin modificar su estructura

```js
const usuario1 = { id: 1 };
const usuario2 = { id: 2 };

const roles = new Map();
roles.set(usuario1, "admin");
roles.set(usuario2, "editor");

console.log(roles.get(usuario1)); // "admin"
```

---

## 📝 Preguntas de repaso

!!! question "Reflexiona sobre lo aprendido"
    1. ¿Qué diferencia hay entre usar un objeto literal y un `Map`?
    2. ¿Qué devuelve el método `.get(clave)` cuando la clave no existe?
    3. ¿Cómo convertirías un `Map` en un array de pares clave–valor?
    4. ¿Qué método utilizarías para borrar una entrada de un `Map`?
    5. ¿Qué tipo de valores se pueden usar como clave en un `Map`?
